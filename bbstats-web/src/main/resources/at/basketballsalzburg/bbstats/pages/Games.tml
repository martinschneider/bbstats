<html t:type="pageLayout" t:id="pageLayout"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
	xmlns:p="tapestry:parameter">

<t:zone t:id="gameEditorZone">
	<t:if test="editorVisible">
		<t:box t:id="gameEditorBox">
			<t:gameEditor t:id="gameEditor" gameParameter="game" />
		</t:box>
		<p:else>
			<div class="button-bar">
				<t:eventlink t:id="newGame" class="button-inline">${message:new}</t:eventlink>
			</div>
		</p:else>
	</t:if>
</t:zone>
<t:box t:id="gameFilterBox">
	<t:form>
		<t:label for="dateFromField" />
		<t:datetimefield t:id="dateFromField" />
		<br />
		<t:label for="dateToField" />
		<t:datetimefield t:id="dateToField" />
		<br />
		<div class="button-bar">
			<t:linksubmit t:id="dateSubmit" class="button-inline">${message:filterGames}</t:linksubmit>
		</div>
	</t:form>
</t:box>
<t:box t:id="gameGridBox" style="margin-bottom: 250px;">
	<t:zone t:id="gameGridZone">
		<t:grid t:id="gameGrid">
			<p:dateTimeCell>
				<t:output format="message:dateFormat" value="game.dateTime" />
			</p:dateTimeCell>
			<p:leagueCell>${game.league.shortname}</p:leagueCell>
			<p:teamACell>${game.teamA.name}</p:teamACell>
			<p:teamBCell>${game.teamB.name}</p:teamBCell>
			<p:resultCell>
				<b>${printEndResult(game)} <t:if test="ot"> ${message:ot}</t:if>
				</b>${printPeriodResults(game)}</p:resultCell>
			<p:coachesCell>

			</p:coachesCell>
			<p:statsCell>
				<a class="stats-icon" />
				<div class="details" style="display: none;">
					<t:box t:id="statsBox">
						<t:grid t:id="statGrid">
							<p:nameCell>${gameStat.player.lastName} ${gameStat.player.firstName}</p:nameCell>
						</t:grid>
						<div style="margin-top: 15px; margin-left: 10px;">
							<b>${message:coaches}</b><br />
							<t:loop source="game.coaches" value="coach">
            					${coach.lastName} ${coach.firstName}<br />
							</t:loop>
						</div>
						<div style="margin-top: 15px; margin-left: 10px;">
							<b>${message:ageGroups}</b><br />
							<t:loop source="game.ageGroups" value="ageGroup">
            					${ageGroup.name}<br />
							</t:loop>
						</div>
					</t:box>
				</div>
			</p:statsCell>
			<p:winLossCell>
				<t:if test="win">
					<div class="win" />
					<p:else>
						<div class="loss" />
					</p:else>
				</t:if>
			</p:winLossCell>
			<p:editCell>
				<t:eventlink t:id="editGame" class="edit-item"
					title="${message:edit}" />
			</p:editCell>
			<p:deleteCell>
				<t:eventlink t:id="deleteGame" class="delete-item"
					title="${message:delete}" />
			</p:deleteCell>
		</t:grid>
	</t:zone>
</t:box>

</html>
